setup（141）

[TOC]

# 概念

`setup` 是 `Vue3` 中的一个新的配置项，值为函数。

# 用途

组件中所有用到的数据、方法等，都要配置在`setup` 中。是所有 `组合API` 表演的舞台，所谓的`组合API`，Vue2中默认直接可以写methods，data等配置，也就是默认都有；而在Vue3中，需要用到哪个配置，就需要导入对应的配置，也就是导入才有，不导入没有，好比 `express` 中间件

# 两种返回值

`setup` 的两种返回值
- 若返回一个对象，则对象中的属性、方法，在模板中华均可直接使用。（常用）
- 若返回一个渲染函数，则可以自定义渲染内容。（了解）

# 注意点

- 尽量不要与 `Vue2` 配置混用
    -  `Vue2` 配置（data、methods、computed...）中可以访问到 `setup` 中的属性、方法。
    -  但在`setup` 中不能访问到 `Vue2` 配置（data、methods、computed...）
    -  如果有重名，`setup` 优先
- `setup` 不能是一个 `async` 函数，因为返回值不再是 `return` 的对象，而是 `promise` ，也就导致模板看不到 `return` 对象中的属性。