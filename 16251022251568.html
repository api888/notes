<!doctype html>
<html class="no-js" lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
        烂笔头
    </title>
    <meta name="description" content="">
    <link href="atom.xml" rel="alternate" title="烂笔头" type="application/atom+xml">
    <link rel="stylesheet" href="asset/css/foundation.min.css" />
    <link rel="stylesheet" href="asset/css/docs.css" />

    <script src="asset/js/vendor/modernizr.js"></script>
    <script src="asset/js/vendor/jquery.js"></script>
    <script src="asset/highlightjs/highlight.pack.js"></script>
    <link href="asset/highlightjs/styles/github.css" media="screen, projection" rel="stylesheet" type="text/css">
    <script>
        hljs.initHighlightingOnLoad();
    </script>

</head>

<body class="antialiased hide-extras"></body>

<div class="inner-wrap">


    <nav class="top-bar docs-bar hide-for-small" data-topbar>

        <div id="header">
            <h1><a href="index.html">烂笔头</a></h1>
        </div>

    </nav>


    <div class="row">
        <div class="sidebar">
            <ul id="side-nav" class="side-nav">

                
                <li class="side-title"><span>Android</span></li>
                
                <li><a title="移除第三方SDK所声明的权限" href="16280619241100.html">移除第三方SDK所声明的权限</a></li>
                
                <li><a title="Android登录页面，未勾选用户协议、隐私政策出现抖动效果" href="16280609822586.html">Android登录页面，未勾选用户协议、隐私政策出现抖动效果</a></li>
                
                <li><a title="DialogFragment内存泄露问题能不能一次性改好" href="16251021954820.html">DialogFragment内存泄露问题能不能一次性改好</a></li>
                
                <li><a title="Android静默安装实现方案，仿360手机助手秒装和智能安装功能" href="16251021954779.html">Android静默安装实现方案，仿360手机助手秒装和智能安装功能</a></li>
                
                <li><a title="Android 添加水印功能" href="16251021954737.html">Android 添加水印功能</a></li>
                
                <li><a title="Android 监听手电筒状态" href="16251021954689.html">Android 监听手电筒状态</a></li>
                 
                <li class="side-title"><span>Github</span></li>
                
                <li><a title="使用Github+jsdelivr构建你的免费图床" href="16251022060206.html">使用Github+jsdelivr构建你的免费图床</a></li>
                 
                <li class="side-title"><span>Glide</span></li>
                
                <li><a title="Glide源码修改-自定义磁盘缓存实现永久存储" href="16251022251608.html">Glide源码修改-自定义磁盘缓存实现永久存储</a></li>
                
                <li><a title="Android—Glide使用教程（一）" href="16251022251568.html">Android—Glide使用教程（一）</a></li>
                
                <li><a title="Android—Glide使用教程（二）" href="16251022251484.html">Android—Glide使用教程（二）</a></li>
                
                <li><a title="Android—Glide使用教程（三）" href="16251022251527.html">Android—Glide使用教程（三）</a></li>
                 
                <li class="side-title"><span>Gradle</span></li>
                
                <li><a title="Gradle 自定义Plugin插件之上传APK到蒲公英" href="16280610391708.html">Gradle 自定义Plugin插件之上传APK到蒲公英</a></li>
                
                <li><a title="自定义Gradle Plugin，优雅的解决第三方Jar包中的bug" href="16280610391664.html">自定义Gradle Plugin，优雅的解决第三方Jar包中的bug</a></li>
                
                <li><a title="如何使用Android Studio开发Gradle插件" href="16280610391616.html">如何使用Android Studio开发Gradle插件</a></li>
                
                <li><a title="sourceSets使用" href="16251022385733.html">sourceSets使用</a></li>
                
                <li><a title="脑洞大开，Gradle项目管理依赖的船新版本" href="16251022385689.html">脑洞大开，Gradle项目管理依赖的船新版本</a></li>
                 
                <li class="side-title"><span>Rxjava</span></li>
                
                <li><a title="RxJava2 只看这一篇文章就够了" href="16251022491138.html">RxJava2 只看这一篇文章就够了</a></li>
                 
                <li class="side-title"><span>GreenDAO</span></li>
                
                <li><a title="GreenDao 3.3.0 基本使用与入门 （一）" href="16280610693006.html">GreenDao 3.3.0 基本使用与入门 （一）</a></li>
                
                <li><a title="GreenDao 3.3.0 多表关联使用（二）" href="16280610765764.html">GreenDao 3.3.0 多表关联使用（二）</a></li>
                
                <li><a title="GreenDao 3.3.0 增删改查的使用（三）" href="16280610843145.html">GreenDao 3.3.0 增删改查的使用（三）</a></li>
                 
                <li class="side-title"><span>组件化</span></li>
                
                <li><a title="组件化架构之解决Common组件中心化问题(api化方案)" href="16280609309201.html">组件化架构之解决Common组件中心化问题(api化方案)</a></li>
                 
            </ul>
        </div>
        <div class="columns"> <div id="main-content" class="markdown-body">
    <h1>Android—Glide使用教程（一）</h1>

    <ul>
<li>
<a href="#toc_0">Glide 概述</a>
</li>
<li>
<a href="#toc_1">配置Gradle</a>
</li>
<li>
<a href="#toc_2"><strong>加载网络地址资源</strong></a>
</li>
<li>
<a href="#toc_3"><strong>加载drawable资源</strong></a>
</li>
<li>
<a href="#toc_4"><strong>从Uri加载资源</strong></a>
</li>
<li>
<a href="#toc_5"><strong>从文件File加载资源</strong></a>
</li>
<li>
<a href="#toc_6">还可以加载webp图片资源</a>
</li>
<li>
<a href="#toc_7"><strong>1. 占位符 placeholder</strong></a>
</li>
<li>
<a href="#toc_8"><strong>2. 错误占位符error</strong></a>
</li>
<li>
<a href="#toc_9"><strong>3. 图片淡入动画属性crossFade()</strong></a>
</li>
<li>
<a href="#toc_10"><strong>4. dontAnimate()</strong></a>
</li>
<li>
<a href="#toc_11"><strong>5. 图像设置大小 override(horizontalSize, verticalSize)</strong></a>
</li>
<li>
<a href="#toc_12"><strong>6.缩放图像centerCrop()</strong></a>
</li>
<li>
<a href="#toc_13"><strong>7.缩放图像fitCenter()</strong></a>
</li>
<li>
<a href="#toc_14"><strong>8.同时可以加载Gif图像</strong></a>
</li>
<li>
<a href="#toc_15"><strong>9.显示本地视频</strong></a>
</li>
</ul>


<h1 id="toc_0">Glide 概述</h1>

<p>Glide，就像 Picasso，可以从多个源去加载和显示图片，同时也兼顾缓存和在做图片处理的时候维持一个<strong>低内存消耗</strong>。它已经在 Google 官方 APP （如 Google 2015开发者大会的应用程序）中使用了，就和 Picasso 一样受欢迎。在这个系列中，我们要探讨 Glide 和 Picasso 的不同和优势。</p>

<p>Glide建造者要求最少有三个参数 • With(Context context) ,很多AndroidAPI调用，Context是必须的。 • Load(String imageUrl)，这个ImageUrl就是我们要传的图片地址，网络URL。 • Into(ImageView imageView)，这个就是我们想把URL 加载到哪个ImageView中。</p>

<hr/>

<h1 id="toc_1">配置Gradle</h1>

<pre><code class="language-text">dependencies {
    compile &#39;com.github.bumptech.glide:glide:3.7.0&#39;
}
</code></pre>

<p>上面只是简单的概述一波 Glide可以加载一下几种类型的图片资源：</p>

<h1 id="toc_2"><strong>加载网络地址资源</strong></h1>

<pre><code class="language-text">   Glide.with(this)
                .load(&quot;http://i.imgur.com/DvpvklR.png&quot;)
                .fitCenter()
                .into(iv_1);
</code></pre>

<h1 id="toc_3"><strong>加载drawable资源</strong></h1>

<pre><code class="language-text">     Glide.with(this)
                .load(R.drawable.ic_launcher)
                .placeholder(R.mipmap.ic_launcher_round)
                .error(R.mipmap.ic_launcher_round)
                .into(iv_2);
</code></pre>

<h1 id="toc_4"><strong>从Uri加载资源</strong></h1>

<pre><code class="language-text">Uri uri = Uri.parse(&quot;android.resource://&quot; + getPackageName() + &quot;/&quot; + R.drawable.ic_launcher);
        tv_title3.setText(&quot;从 Uri 中加载&quot;);
        Glide.with(this)
                .load(uri)
                .placeholder(R.drawable.ic_launcher)
                .error(R.mipmap.ic_launcher_round)
                .dontAnimate() //加载没有任何动画
                .into(iv_3);
</code></pre>

<h1 id="toc_5"><strong>从文件File加载资源</strong></h1>

<pre><code class="language-text">//这个文件可能不存在于你的设备中。然而你可以用任何文件路径，去指定一个图片路径。
        File file = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES), &quot;S61215-011806.jpg&quot;);
        tv_title4.setText(&quot;从文件中加载&quot;);
        Glide.with(this)
                .load(file)
                .into(iv_4);
</code></pre>

<h1 id="toc_6">还可以加载webp图片资源</h1>

<hr/>

<p>当然前面只是讲了皮毛而已，Glide很强大。我们继续了解其它属性。</p>

<hr/>

<h1 id="toc_7"><strong>1. 占位符 placeholder</strong></h1>

<p>该属性，在图片资源未<strong>加载完成时</strong>，占位符会在Imageview里显示</p>

<pre><code class="language-text">Glide.with(this)
                .load(&quot;http://i.imgur.com/DvpvklR.png&quot;)
                .placeholder(R.drawable.ic_launcher)
                .into(iv_1);
</code></pre>

<p><strong>直接上图，看加载网络地址资源图</strong> </p>

<p><img src="https://cdn.jsdelivr.net/gh/api888/PublicPic@main//img/c07a9cd001014e0a833212e3fb6fe93b_tplv-k3u1fbpfcp-zoom-1.gif" alt=""/></p>

<hr/>

<h1 id="toc_8"><strong>2. 错误占位符error</strong></h1>

<p>该属性，在图片资源<strong>加载失败时</strong>，占位符会在Imageview里显示 还有一个就是，错误占位符，error()接受的参数只能是已经初始化的 <strong>drawable</strong> 对象或者指明它的资源(R.drawable.)。</p>

<pre><code class="language-text"> Glide.with(this)
                .load(&quot;http://i.imgur.com/DvpvklR.png&quot;)
                .error(R.mipmap.ic_launcher_round)
                .into(iv_1);
</code></pre>

<p><strong>直接上图，看加载网络地址资源图</strong> </p>

<p>我们可以看到在<strong>没网</strong>的情况下，我们的<strong>异常占位符显示</strong>了出来。 <strong>反之把网络图片资源加载出来</strong> <br/>
<img src="https://cdn.jsdelivr.net/gh/api888/PublicPic@main//img/47b23f6140e94e52bb714bbfd561095e_tplv-k3u1fbpfcp-zoom-1.gif" alt=""/></p>

<hr/>

<h1 id="toc_9"><strong>3. 图片淡入动画属性crossFade()</strong></h1>

<p>这里要说的是动态图我就不添加了，可以看上面的图</p>

<pre><code class="language-text"> Glide.with(this)
                .load(&quot;http://i.imgur.com/DvpvklR.png&quot;)
                .crossFade()
                .into(iv_1)
</code></pre>

<ul>
<li>根据该源码，我们可以看出crossfade（）方法我们可以传参 。crossFade(int duration)。如果你想要去减慢（或加快）动画，随时可以传一个毫秒的时间给这个方法。动画默认的持续时间是 300毫秒。</li>
</ul>

<p><img src="https://cdn.jsdelivr.net/gh/api888/PublicPic@main//img/62c9c85ea2504d0899cb8a997674570b_tplv-k3u1fbpfcp-zoom-1.jpg" alt=""/></p>

<hr/>

<h1 id="toc_10"><strong>4. dontAnimate()</strong></h1>

<p>这个方法就是直接显示图片，没有淡入淡出效果</p>

<pre><code class="language-text"> Glide.with(this)
                .load(&quot;http://i.imgur.com/DvpvklR.png&quot;)
                .dontAnimate()
                .into(iv_1)
</code></pre>

<hr/>

<h1 id="toc_11"><strong>5. 图像设置大小 override(horizontalSize, verticalSize)</strong></h1>

<p>Glide 有更加高效的内存管理。Glide 自动限制了图片的尺寸在缓存和内存中，并给到 ImageView 需要的尺寸。对于 Glide，如果图片不会自动适配到 ImageView，调用 override(horizontalSize, verticalSize) 。这将在图片显示到 ImageView之前重新改变图片大小。</p>

<pre><code class="language-text"> Glide.with(this)
                .load(&quot;http://i.imgur.com/DvpvklR.png&quot;)
                .override(500, 300)
                .into(iv_1)
</code></pre>

<p>当你还没有目标 view 去知道尺寸的时候，这个选项也可能是有用的。比如，如果 App 想要在闪屏界面预热缓存，它还不能测量 ImageView 的尺寸。然而，如果你知道这个图片多少大，用 override 去提供明确的尺寸。</p>

<hr/>

<h1 id="toc_12"><strong>6.缩放图像centerCrop()</strong></h1>

<p>CenterCrop()是一个裁剪技术，即缩放图像让它填充到 ImageView 界限内并且裁剪额外的部分。ImageView 可能会完全填充，但图像可能不会完整显示。</p>

<pre><code class="language-text"> Glide.with(this)
                .load(&quot;http://i.imgur.com/DvpvklR.png&quot;)
                .override(500, 300)
                .centerCrop()
                .into(iv_1)
</code></pre>

<hr/>

<h1 id="toc_13"><strong>7.缩放图像fitCenter()</strong></h1>

<p>fitCenter() 是裁剪技术，即缩放图像让图像都测量出来等于或小于 ImageView 的边界范围。该<strong>图像将会完全显示</strong>，但可能不会填满整个 ImageView。</p>

<pre><code class="language-text"> Glide.with(this)
                .load(&quot;http://i.imgur.com/DvpvklR.png&quot;)
                .override(500, 300)
                .fitCenter()
                .into(iv_1)
</code></pre>

<hr/>

<h1 id="toc_14"><strong>8.同时可以加载Gif图像</strong></h1>

<p>这里只要是一个GIF图片链接就OK了！</p>

<pre><code class="language-text">Glide.with(this)
                .load(&quot;http://2f.zol-img.com.cn/product/104_1200x900/305/cevDJaCdeLQ6.gif&quot;)
                .override(800, 300)
                .into(iv_2);
</code></pre>

<p>在开发过程中图片链接是<strong>常规图片</strong>。那么我们就需要检测是否是动态图，可以看下面代码 <strong>asGif()</strong>该属性可以强制把图片转成GIF类型。</p>

<pre><code class="language-text">Glide.with(this)
                .load(&quot;http://2f.zol-img.com.cn/product/104_1200x900/305/cevDJaCdeLQ6.gif&quot;)
                .asGif()
                .into(iv_2);
</code></pre>

<p>开发过程中，有些GIF图太大。导致OOM异常，<strong>asBitmap()*<em>直接把GIF图，转成常规图片*</em>（把GIF图片的第一帧当作常规图显示）</strong></p>

<pre><code class="language-text">Glide.with(this)
                .load(&quot;http://2f.zol-img.com.cn/product/104_1200x900/305/cevDJaCdeLQ6.gif&quot;)
                .asBitmap()
                .into(iv_2);
</code></pre>

<hr/>

<h1 id="toc_15"><strong>9.显示本地视频</strong></h1>

<pre><code class="language-text">String filePath = &quot;/Video/test_video.mp4&quot;;
Glide  
    .with( context )
    .load( Uri.fromFile( new File( filePath ) ) )
    .into( imageViewGifAsBitmap );
</code></pre>

<p>这里要说的是，只支持本地视频。网络视频URL 是不会工作的。</p>

<p><a href="https://github.com/z244370114/GlideDemo">DEMO地址请自行下载</a></p>


</div>

<br /><br />
<hr />

<div class="content-nav">
    <div class="large-6 columns">
        <div class="text-left" style="padding:15px 0px;">
            
            <a href="16251022251608.html" title="Previous Post: Glide源码修改-自定义磁盘缓存实现永久存储">&laquo; Glide源码修改-自定义磁盘缓存实现永久存储</a> 
        </div>
    </div>
    <div class="large-6 columns">
        <div class="text-right" style="padding:15px 0px;">
            
            <a href="16280610693006.html" title="Next Post: GreenDao 3.3.0 基本使用与入门 （一）">GreenDao 3.3.0 基本使用与入门 （一） &raquo;</a> 
        </div>
    </div>
</div>

<div class="content_share">
    <div style="padding:0px 0.93em;" class="share-comments">
        
    </div>
</div>
<script type="text/javascript">
    $(function() {
        var currentURL = '16251022251568.html';
        $('#side-nav a').each(function() {
            if ($(this).attr('href') == currentURL) {
                $(this).parent().addClass('active');
            }
        });
    });
</script>  </div>
</div>


<div class="page-bottom">
    <div class="copyright">
        <a href="mailto:888api@sina.com">郝彬彬</a> &copy; 
    </div>
    <div class="copyright text-right">
        <a href="#main-content">TOP</a>
    </div>
</div>

</div>




  














<style type="text/css">
    figure {
        margin: 0.4em 0;
        padding: 0;
    }
    
    figcaption {
        text-align: center;
    }
    /* PrismJS 1.14.0
 http://prismjs.com/download.html#themes=prism&languages=markup+css+clike+javascript */
    /**
 * prism.js default theme for JavaScript, CSS and HTML
 * Based on dabblet (http://dabblet.com)
 * @author Lea Verou
 */
    
    code[class*="language-"],
    pre[class*="language-"] {
        color: black;
        background: none;
        text-shadow: 0 1px white;
        font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
        text-align: left;
        white-space: pre;
        word-spacing: normal;
        word-break: normal;
        word-wrap: normal;
        line-height: 1.5;
        -moz-tab-size: 4;
        -o-tab-size: 4;
        tab-size: 4;
        -webkit-hyphens: none;
        -moz-hyphens: none;
        -ms-hyphens: none;
        hyphens: none;
    }
    
    pre[class*="language-"]::-moz-selection,
    pre[class*="language-"] ::-moz-selection,
    code[class*="language-"]::-moz-selection,
    code[class*="language-"] ::-moz-selection {
        text-shadow: none;
        background: #b3d4fc;
    }
    
    pre[class*="language-"]::selection,
    pre[class*="language-"] ::selection,
    code[class*="language-"]::selection,
    code[class*="language-"] ::selection {
        text-shadow: none;
        background: #b3d4fc;
    }
    
    @media print {
        code[class*="language-"],
        pre[class*="language-"] {
            text-shadow: none;
        }
    }
    /* Code blocks */
    
    pre[class*="language-"] {
        padding: 1em;
        margin: .5em 0;
        overflow: auto;
    }
    
     :not(pre)>code[class*="language-"],
    pre[class*="language-"] {
        background: #F7F7F7;
    }
    /* Inline code */
    
     :not(pre)>code[class*="language-"] {
        padding: .1em;
        border-radius: .3em;
        white-space: normal;
    }
    
    .token.comment,
    .token.prolog,
    .token.doctype,
    .token.cdata {
        color: slategray;
    }
    
    .token.punctuation {
        color: #999;
    }
    
    .namespace {
        opacity: .7;
    }
    
    .token.property,
    .token.tag,
    .token.boolean,
    .token.number,
    .token.constant,
    .token.symbol,
    .token.deleted {
        color: #905;
    }
    
    .token.selector,
    .token.attr-name,
    .token.string,
    .token.char,
    .token.builtin,
    .token.inserted {
        color: #690;
    }
    
    .token.operator,
    .token.entity,
    .token.url,
    .language-css .token.string,
    .style .token.string {
        color: #9a6e3a;
        background: hsla(0, 0%, 100%, .5);
    }
    
    .token.atrule,
    .token.attr-value,
    .token.keyword {
        color: #07a;
    }
    
    .token.function,
    .token.class-name {
        color: #DD4A68;
    }
    
    .token.regex,
    .token.important,
    .token.variable {
        color: #e90;
    }
    
    .token.important,
    .token.bold {
        font-weight: bold;
    }
    
    .token.italic {
        font-style: italic;
    }
    
    .token.entity {
        cursor: help;
    }
    
    pre[class*="language-"].line-numbers {
        position: relative;
        padding-left: 3.8em;
        counter-reset: linenumber;
    }
    
    pre[class*="language-"].line-numbers>code {
        position: relative;
        white-space: inherit;
    }
    
    .line-numbers .line-numbers-rows {
        position: absolute;
        pointer-events: none;
        top: 0;
        font-size: 100%;
        left: -3.8em;
        width: 3em;
        /* works for line-numbers below 1000 lines */
        letter-spacing: -1px;
        border-right: 1px solid #999;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
    }
    
    .line-numbers-rows>span {
        pointer-events: none;
        display: block;
        counter-increment: linenumber;
    }
    
    .line-numbers-rows>span:before {
        content: counter(linenumber);
        color: #999;
        display: block;
        padding-right: 0.8em;
        text-align: right;
    }
</style>

<script src="asset/js/foundation.min.js"></script>
<script src="asset/js/foundation/foundation.offcanvas.js"></script>
<script>
    $(document).foundation();
</script>
<script src="asset/js/watermark.js"></script>

</body>

</html>